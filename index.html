<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üß≤</text></svg>">
  <style>
    :root{
      --bg:#f0e6ff;            /* —Å–∏—Ä–µ–Ω–µ–≤—ã–π —Ñ–æ–Ω –∫–∞–∫ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ */
      --card:#ffffff;          /* –±–µ–ª–∞—è ¬´–º–∞–≥–Ω–∏—Ç–Ω–∞—è –¥–æ—Å–∫–∞¬ª */
      --ink:#1f2937;           /* —Ç—ë–º–Ω—ã–π —Ç–µ–∫—Å—Ç */
      --muted:#6b7280;         /* –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–π */
      --accent-start:#ff7aa8;  /* –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è —à–∞–ø–æ–∫/–∫–Ω–æ–ø–æ–∫ */
      --accent-end:#f6c14d;
      --brand:#7c3aed;         /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
      --led-off:#0f172a;       /* ¬´–¥—ã—Ä–æ—á–∫–∞¬ª –ø–æ–¥ –¥–∏–æ–¥ */
      --led-on:#2cd36f;        /* –Ω–µ–æ–Ω–æ–≤–æ‚Äë–∑–µ–ª—ë–Ω—ã–π */
      --radius:22px;
      --space:12px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font:16px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', 'Helvetica Neue', Arial, 'Apple Color Emoji','Segoe UI Emoji';
      color:var(--ink);
      background: radial-gradient(1300px 900px at 80% -100px, #fff 0, #f7ecff 35%, var(--bg) 100%);
    }
    .wrap{max-width:980px;margin:40px auto;padding:0 16px}

    /* –í–µ—Ä—Ö–Ω–∏–π –±–∞–Ω–Ω–µ—Ä */
    .banner{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between}
    .pill{background:linear-gradient(135deg,var(--accent-start),var(--accent-end));
      color:#fff;padding:10px 16px;border-radius:16px;font-weight:700;letter-spacing:.5px;
      box-shadow:0 8px 24px rgba(0,0,0,.15)}
    h1{margin:.2em 0 0;font-size:clamp(28px,4.2vw,48px);line-height:1.05;letter-spacing:.5px;text-transform:uppercase}
    .sub{color:var(--muted);font-size:14px}

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º */
    .card{position:relative;margin-top:20px;background:var(--card);border-radius:28px;padding:22px 18px 18px;box-shadow:0 10px 25px rgba(124,58,237,.25)}
    .card:before, .card:after{content:"";position:absolute;inset:-1px;border-radius:inherit;pointer-events:none}
    .card:after{box-shadow:inset 0 0 0 2px rgba(0,0,0,.04)}

    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:2px 2px 14px}
    .toolbar .search{flex:1 1 260px;display:flex;align-items:center;gap:8px;background:#f3f4f6;border-radius:14px;padding:10px 12px}
    .toolbar input[type="search"]{border:0;background:transparent;outline:0;width:100%;font-size:15px}

    button{appearance:none;border:0;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));color:#fff;font-weight:700;
      padding:10px 14px;border-radius:14px;cursor:pointer;box-shadow:0 10px 20px rgba(0,0,0,.15);transition:transform .06s ease}
    button:hover{transform:translateY(-1px)}
    button.secondary{background:#f3f4f6;color:#111;font-weight:600;box-shadow:none}

    /* –°–µ—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ */
    .grid{display:grid;grid-template-columns:1fr;gap:2px}
    @media (min-width:700px){.grid{grid-template-columns:1fr 1fr}}

    /* –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ */
    .item{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:10px 12px;border-radius:12px;cursor:pointer;user-select:none;position:relative}
    .item:hover{background:#f8fafc}
    .item input{position:absolute;opacity:0;pointer-events:none}
    .switch{position:relative;width:46px;height:26px;background:#e5e7eb;border-radius:9999px;box-shadow:inset 0 0 0 2px rgba(0,0,0,.05);transition:background .2s, box-shadow .2s}
    .switch::before{content:"";position:absolute;top:3px;left:3px;width:20px;height:20px;border-radius:50%;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.25);transition:transform .2s}
    .item input:checked + .switch::before{transform:translateX(20px)}
    .name{font-weight:800;letter-spacing:.2px;flex:1}
    .item input:focus-visible + .switch{outline:3px solid #60a5fa;outline-offset:3px}
    .item input:checked + .switch{background:var(--led-on); box-shadow:0 0 10px rgba(44,211,111,.7), 0 0 22px rgba(44,211,111,.35)}
    .item input:checked ~ .name{opacity:1}

    .section-title{font-size:18px;font-weight:900;letter-spacing:.4px;margin:4px 12px;color:#111}

    /* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø—É–Ω–∫—Ç–∞ */
    form.add{display:flex;gap:8px;flex-wrap:wrap;margin:6px 2px 10px}
    form.add input{flex:1 1 220px;border:0;background:#f3f4f6;border-radius:14px;padding:10px 12px;font-size:15px;outline:0}

    /* –ò—Ç–æ–≥–∏ */
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;color:var(--muted);font-size:13px}

    /* –¢–æ—Å—Ç */
    .toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none;transition:opacity .2s, transform .2s;box-shadow:0 10px 24px rgba(0,0,0,.25)}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-2px)}

    /* –ü–µ—á–∞—Ç—å */
    @media print{.banner,.toolbar,form.add,.footer,.pill{display:none}.card{box-shadow:none;border:0}body{background:#fff}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="banner">      <h1>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h1>
      <div class="sub">–ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ —Ç—É–º–±–ª–µ—Ä—ã ‚Äî –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.</div>
    </div>

    <div class="card" role="region" aria-label="–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤">
      <div class="toolbar">
        <div class="search" role="search">
          üîé
          <input id="q" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–ø–∏—Å–∫—É‚Ä¶ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–ª–æ–∫–æ)" autocomplete="off" />
        </div>
        <button class="secondary" id="btn-all">–í—ã–¥–µ–ª–∏—Ç—å –≤—Å—ë</button>
        <button class="secondary" id="btn-clear">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button id="btn-copy" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        <button id="btn-share" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–ø–∏—Å–∫–æ–º">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
      </div>

      <div id="list" class="grid" aria-live="polite"></div>

      <form class="add" id="add-form">
        <input id="add-input" type="text" minlength="2" maxlength="40" placeholder="–î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–¥—É–∫—Ç‚Ä¶" />
        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
      </form>

      <div class="footer">
        <span id="counter">0 –≤—ã–±—Ä–∞–Ω–æ</span>
        <span>–°–¥–µ–ª–∞–Ω–æ —Å ‚ô• ‚Äî –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω</span>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ===== –î–∞–Ω–Ω—ã–µ =====
    const STORAGE_KEY = 'magnet-list-v2';
    const DEFAULT_ITEMS = [
      '–ê–ø–µ–ª—å—Å–∏–Ω—ã','–ë–∞–Ω–∞–Ω—ã','–í–∏–Ω–æ–≥—Ä–∞–¥','–í–æ–¥–∞','–ì—Ä–∏–±—ã','–ô–æ–≥—É—Ä—Ç','–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å','–ö–µ—Ç—á—É–ø','–ö–æ—Ñ–µ','–ö–æ–ª–±–∞—Å–∞',
      '–ö–∞—à–∞','–ö—É—Ä–∏—Ü–∞','–õ—É–∫','–ú–∞–∫–∞—Ä–æ–Ω—ã','–ú–∞—Å–ª–æ','–ú–∞–π–æ–Ω–µ–∑','–ú—ë–¥','–ú–æ–ª–æ–∫–æ','–ú—è—Å–æ','–û–≥—É—Ä—Ü—ã',
      '–ü–µ—Ä–µ—Ü','–ü–µ–ª—å–º–µ–Ω–∏','–ü–∏–≤–æ','–ü–æ–º–∏–¥–æ—Ä—ã','–†–∏—Å','–†—ã–±–∞','–°–∞—Ö–∞—Ä','–°–º–µ—Ç–∞–Ω–∞','–°–ª–∏–≤–∫–∏','–°–æ–ª—å',
      '–°–æ–∫','–°—ã—Ä','–°—ã—Ä–Ω—ã–π —Å–æ—É—Å','–¢–≤–æ—Ä–æ–≥','–ß–∞–π','–ß–µ—Å–Ω–æ–∫','–®–æ–∫–æ–ª–∞–¥','–•–ª–µ–±','–Ø–±–ª–æ–∫–∏','–Ø–π—Ü–∞'
    ];

    /** –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    function loadState(){
      try{
        const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
        if(data && Array.isArray(data.items)) return data;
      }catch(e){}
      return {items: DEFAULT_ITEMS.map(name => ({name, checked:false}))};
    }
    function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }

    // ===== –†–µ–Ω–¥–µ—Ä =====
    const listEl = document.getElementById('list');
    const counterEl = document.getElementById('counter');
    const toastEl = document.getElementById('toast');
    const qEl = document.getElementById('q');

    let state = loadState();

    function uidFromName(name){
      return 'i-' + name.toLowerCase().replace(/[^a-z–∞-—è—ë0-9]+/gi,'-');
    }

    function render(filter=''){
      // –û—á–∏—Å—Ç–∫–∞
      listEl.innerHTML = '';
      const norm = s => s.toLowerCase().replace('—ë','–µ');
      const f = norm(filter.trim());

      const frag = document.createDocumentFragment();
      state.items.forEach((item, idx) => {
        if(f && !norm(item.name).includes(f)) return;
        const id = uidFromName(item.name) + '-' + idx;
        const label = document.createElement('label');
        label.className = 'item';

        const input = document.createElement('input');
        input.type = 'checkbox';
        input.id = id;
        input.checked = !!item.checked;
        input.setAttribute('aria-label', item.name);

        const sw = document.createElement('span');
        sw.className = 'switch';
        sw.setAttribute('aria-hidden','true');

        const name = document.createElement('span');
        name.className = 'name';
        name.textContent = item.name;

        label.appendChild(name);
        label.appendChild(input);
        label.appendChild(sw);
        frag.appendChild(label);

        input.addEventListener('change', () => {
          item.checked = input.checked;
          saveState();
          updateCounter();
        });
      });
      listEl.appendChild(frag);
      updateCounter();
    }

    function updateCounter(){
      const cnt = state.items.filter(x=>x.checked).length;
      counterEl.textContent = cnt + ' –≤—ã–±—Ä–∞–Ω–æ';
    }

    // ===== –î–µ–π—Å—Ç–≤–∏—è =====
    document.getElementById('btn-clear').addEventListener('click', () => {
      state.items.forEach(i=>i.checked=false); saveState(); render(qEl.value);
    });
    document.getElementById('btn-all').addEventListener('click', () => {
      state.items.forEach(i=>i.checked=true); saveState(); render(qEl.value);
    });

    document.getElementById('btn-copy').addEventListener('click', async () => {
      const text = state.items.filter(i=>i.checked).map(i=>'‚Ä¢ '+i.name).join('\n');
      try{ await navigator.clipboard.writeText(text); showToast('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞'); }
      catch(e){ showToast('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å :(') }
    });

    document.getElementById('btn-share').addEventListener('click', async () => {
      const items = state.items.filter(i=>i.checked).map(i=>i.name);
      const text = '–ú–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫: '+ (items.length? items.join(', '): '–Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ');
      if(navigator.share){
        try{ await navigator.share({title:'–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫', text}); }
        catch(e){ /* ignore */ }
      } else {
        try{ await navigator.clipboard.writeText(text); showToast('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å'); }
        catch(e){ showToast('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–µ —É–¥–∞–ª–æ—Å—å') }
      }
    });

    qEl.addEventListener('input', () => render(qEl.value));

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø—É–Ω–∫—Ç–∞
    document.getElementById('add-form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const input = document.getElementById('add-input');
      let name = (input.value||'').trim();
      if(name.length < 2) return;
      // —É–∂–µ –µ—Å—Ç—å? ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫–ª–∏–∫–∞–µ–º/–ø—Ä–æ–∫—Ä—É—Ç–∏–º
      const existing = state.items.find(i=>i.name.toLowerCase()===name.toLowerCase());
      if(existing){
        existing.checked = true; saveState(); render(qEl.value); showToast('–£–∂–µ –≤ —Å–ø–∏—Å–∫–µ ‚Äî –æ—Ç–º–µ—Ç–∏–ª'); input.value='';
        return;
      }
      // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü
      state.items.push({name, checked:true});
      saveState();
      input.value='';
      render(qEl.value);
      showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ');
    });

    function showToast(msg){
      toastEl.textContent = msg; toastEl.classList.add('show');
      clearTimeout(showToast.t); showToast.t = setTimeout(()=>toastEl.classList.remove('show'), 1600);
    }

    // –ü–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
    render();
  </script>
</body>
</html>
